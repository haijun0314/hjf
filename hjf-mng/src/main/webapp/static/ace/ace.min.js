"ace" in window || (window.ace = {});
jQuery(function(a) {
	window.ace.click_event = a.fn.tap ? "tap" : "click"
});
jQuery(function() {
	ace.handle_side_menu(jQuery);
	ace.enable_search_ahead(jQuery);
	ace.general_things(jQuery);
	ace.widget_boxes(jQuery);
	ace.widget_reload_handler(jQuery)
});
ace.handle_side_menu = function(a) {
	a("#menu-toggler").on(ace.click_event, function() {
		a("#sidebar").toggleClass("display");
		a(this).toggleClass("display");
		return false
	});
	var b = a("#sidebar").hasClass("menu-min");
	a("#sidebar-collapse").on(ace.click_event, function() {
		b = a("#sidebar").hasClass("menu-min");
		ace.settings.sidebar_collapsed(!b)
	});
	var d = navigator.userAgent.match(/OS (5|6|7)(_\d)+ like Mac OS X/i);
	a(".nav-list").on(ace.click_event, function(c) {
		var f = a(c.target).closest("a");
		if (f && f.length != 0) {
			b = a("#sidebar").hasClass("menu-min");
			if (f.hasClass("dropdown-toggle")) {
				var e = f.next().get(0);
				if (!a(e).is(":visible")) {
					c = a(e.parentNode).closest("ul");
					if (b && c.hasClass("nav-list")) return;
					c.find("> .open > .submenu").each(function() {
						this != e &&   a(this).slideUp(200).parent().removeClass("open active") 
					})
				}
				if (b && a(e.parentNode.parentNode).hasClass("nav-list")) return false;
				a(e).slideToggle(200).parent().toggleClass("open active") 
				return false
			}
			if (b && ace.click_event == "tap" && f.get(0).parentNode.parentNode == this) {
				var g = f.find(".menu-text").get(0);
				if (c.target != g && !a.contains(g, c.target)) return false
			}
			if (d) {
				document.location = f.attr("href");
				return false
			}
		}
	})
};
ace.general_things = function(a) {
	a('.ace-nav [class*="icon-animated-"]').closest("a").on("click", function() {
		var b = a(this).find('[class*="icon-animated-"]').eq(0),
			c = b.attr("class").match(/icon\-animated\-([\d\w]+)/);
		b.removeClass(c[0]);
		a(this).off("click")
	});
	a(".nav-list .badge[title],.nav-list .label[title]").tooltip({
		placement: "right"
	});
	a("#ace-settings-btn").on(ace.click_event, function() {
		a(this).toggleClass("open");
		a("#ace-settings-box").toggleClass("open")
	});
	a("#ace-settings-navbar").on("click", function() {
		ace.settings.navbar_fixed(this.checked)
	}).each(function() {
		this.checked = ace.settings.is("navbar", "fixed")
	});
	a("#ace-settings-sidebar").on("click", function() {
		ace.settings.sidebar_fixed(this.checked)
	}).each(function() {
		this.checked = ace.settings.is("sidebar", "fixed")
	});
	a("#ace-settings-breadcrumbs").on("click", function() {
		ace.settings.breadcrumbs_fixed(this.checked)
	}).each(function() {
		this.checked = ace.settings.is("breadcrumbs", "fixed")
	});
	a("#ace-settings-add-container").on("click", function() {
		ace.settings.main_container_fixed(this.checked)
	}).each(function() {
		this.checked = ace.settings.is("main-container", "fixed")
	});
	a("#ace-settings-rtl").removeAttr("checked").on("click", function() {
		ace.switch_direction(jQuery)
	});
	a("#btn-scroll-up").on(ace.click_event, function() {
		var b = Math.min(400, Math.max(100, parseInt(a("html").scrollTop() / 3)));
		a("html,body").animate({
			scrollTop: 0
		}, b);
		return false
	});
	try {
		a("#skin-colorpicker").ace_colorpicker()
	} catch (b) {}
	a("#skin-colorpicker").on("change", function() {
		var b = a(this).find("option:selected").data("skin"),
			c = a(document.body);
		c.removeClass("skin-1 skin-2 skin-3");
		b != "default" && c.addClass(b);
		b == "skin-1" ? a(".ace-nav > li.grey").addClass("dark") : a(".ace-nav > li.grey").removeClass("dark");
		if (b == "skin-2") {
			a(".ace-nav > li").addClass("no-border margin-1");
			a(".ace-nav > li:not(:last-child)").addClass("light-pink").find('> a > [class*="icon-"]').addClass("pink").end().eq(0).find(".badge").addClass("badge-warning")
		} else {
			a(".ace-nav > li").removeClass("no-border margin-1");
			a(".ace-nav > li:not(:last-child)").removeClass("light-pink").find('> a > [class*="icon-"]').removeClass("pink").end().eq(0).find(".badge").removeClass("badge-warning")
		}
		b == "skin-3" ? a(".ace-nav > li.grey").addClass("red").find(".badge").addClass("badge-yellow") : a(".ace-nav > li.grey").removeClass("red").find(".badge").removeClass("badge-yellow")
	})
};
ace.widget_boxes = function(a) {
	a(document).on("hide.bs.collapse show.bs.collapse", function(b) {
		var d = b.target.getAttribute("id");
		a('[href*="#' + d + '"]').find('[class*="icon-"]').each(function() {
			var c = a(this),
				f, e = null,
				d = null;
			if (e = c.attr("data-icon-show")) d = c.attr("data-icon-hide");
			else if (f = c.attr("class").match(/icon\-(.*)\-(up|down)/)) {
				e = "icon-" + f[1] + "-down";
				d = "icon-" + f[1] + "-up"
			}
			if (e) {
				b.type == "show" ? c.removeClass(e).addClass(d) : c.removeClass(d).addClass(e);
				return false
			}
		})
	});
	a(document).on("click.ace.widget", "[data-action]", function(b) {
		b.preventDefault();
		var d = a(this),
			b = d.data("action"),
			c = d.closest(".widget-box");
		if (!c.hasClass("ui-sortable-helper")) if (b == "collapse") {
			var b = c.hasClass("collapsed") ? "show" : "hide",
				f = b == "show" ? "shown" : "hidden",
				e;
			c.trigger(e = a.Event(b + ".ace.widget"));
			if (!e.isDefaultPrevented()) {
				var g = c.find(".widget-body"),
					d = d.find("[class*=icon-]").eq(0),
					h = d.attr("class").match(/icon\-(.*)\-(up|down)/),
					i = "icon-" + h[1] + "-down",
					h = "icon-" + h[1] + "-up",
					j = g.find(".widget-body-inner"),
					g = j.length == 0 ? g.wrapInner('<div class="widget-body-inner"></div>').find(":first-child").eq(0) : j.eq(0);
				if (b == "show") {
					d && d.addClass(h).removeClass(i);
					c.removeClass("collapsed");
					g.slideUp(0, function() {
						g.slideDown(300, function() {
							c.trigger(e = a.Event(f + ".ace.widget"))
						})
					})
				} else {
					d && d.addClass(i).removeClass(h);
					g.slideUp(200, function() {
						c.addClass("collapsed");
						c.trigger(e = a.Event(f + ".ace.widget"))
					})
				}
			}
		} else if (b == "close") {
			c.trigger(e = a.Event("close.ace.widget"));
			if (!e.isDefaultPrevented()) {
				b = parseInt(d.data("close-speed")) || 300;
				c.hide(b, function() {
					c.trigger(e = a.Event("closed.ace.widget"));
					c.remove()
				})
			}
		} else if (b == "reload") {
			c.trigger(e = a.Event("reload.ace.widget"));
			if (!e.isDefaultPrevented()) {
				d.blur();
				var k = false;
				if (c.css("position") == "static") {
					k = true;
					c.addClass("position-relative")
				}
				c.append('<div class="widget-box-overlay"><i class="icon-spinner icon-spin icon-2x white"></i></div>');
				c.one("reloaded.ace.widget", function() {
					c.find(".widget-box-overlay").remove();
					k && c.removeClass("position-relative")
				})
			}
		} else if (b == "settings") {
			e = a.Event("settings.ace.widget");
			c.trigger(e)
		}
	})
};
ace.widget_reload_handler = function(a) {
	a(document).on("reload.ace.widget", ".widget-box", function() {
		var b = a(this);
		setTimeout(function() {
			b.trigger("reloaded.ace.widget")
		}, parseInt(Math.random() * 1E3 + 1E3))
	})
};
ace.enable_search_ahead = function(a) {
	ace.variable_US_STATES = ["Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", "Delaware", "Florida", "Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada", "New Hampshire", "New Jersey", "New Mexico", "New York", "North Dakota", "North Carolina", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington", "West Virginia", "Wisconsin", "Wyoming"];
	try {
		a("#nav-search-input").typeahead({
			source: ace.variable_US_STATES,
			updater: function(b) {
				a("#nav-search-input").focus();
				return b
			}
		})
	} catch (b) {}
};
ace.switch_direction = function(a) {
	function b(a, b) {
		d.find("." + a).removeClass(a).addClass("tmp-rtl-" + a).end().find("." + b).removeClass(b).addClass(a).end().find(".tmp-rtl-" + a).removeClass("tmp-rtl-" + a).addClass(b)
	}
	var d = a(document.body);
	d.toggleClass("rtl").find(".dropdown-menu:not(.datepicker-dropdown,.colorpicker)").toggleClass("pull-right").end().find(".pull-right:not(.dropdown-menu,blockquote,.profile-skills .pull-right)").removeClass("pull-right").addClass("tmp-rtl-pull-right").end().find(".pull-left:not(.dropdown-submenu,.profile-skills .pull-left)").removeClass("pull-left").addClass("pull-right").end().find(".tmp-rtl-pull-right").removeClass("tmp-rtl-pull-right").addClass("pull-left").end().find(".chosen-container").toggleClass("chosen-rtl").end();
	b("align-left", "align-right");
	b("no-padding-left", "no-padding-right");
	b("arrowed", "arrowed-right");
	b("arrowed-in", "arrowed-in-right");
	b("messagebar-item-left", "messagebar-item-right");
	var c = a("#piechart-placeholder");
	if (c.size() > 0) {
		a = a(document.body).hasClass("rtl") ? "nw" : "ne";
		c.data("draw").call(c.get(0), c, c.data("chart"), a)
	}
};